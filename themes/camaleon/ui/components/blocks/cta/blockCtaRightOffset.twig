{%
  set classes = [
    'block',
    'block' ~ bundle|capitalize,
    'block' ~ bundle|capitalize ~ '--' ~ view_mode,
    configuration.block_style.animation_option == TRUE and configuration.block_style.animation_trigger == 'on_scroll' ? 'wow' : '',
    configuration.block_style.animation_option == TRUE ? configuration.block_style.animation_type : '',
  ]|remove_empty
%}

{%
  set title_classes = [
    configuration.label_display == FALSE ? 'visually-hidden',
    'block' ~ bundle|capitalize ~ '--' ~ view_mode ~ '__block-title',
  ]
%}

{%
  set style_vars = [
    content.field_bt_button_icon|render ? '--buttonIcon: calc(1.5rem + var(--buttonIconSize, 24px))',
    content.field_bt_button_secondary_icon|render ? '--buttonSecondaryIcon: calc(1.5rem + var(--buttonIconSize, 24px))',
    configuration.block_style.background_color_select != 'default' and configuration.block_style.background_color_select != 'customColor' ? '--backgroundColor: var(--' ~ configuration.block_style.background_color_select ~ ')',
    configuration.block_style.background_color_select == 'customColor' ? '--backgroundColor: ' ~ configuration.block_style.background_color_custom ~ '80',
    configuration.block_style.title_color_select != 'default' and configuration.block_style.title_color_select != 'customColor' ? '--titleColor: var(--' ~ configuration.block_style.title_color_select ~ ')',
    configuration.block_style.title_color_select == 'customColor' ? '--titleColor: ' ~ configuration.block_style.title_color_custom,
    configuration.block_style.caption_color_select != 'default' and configuration.block_style.caption_color_select != 'customColor' ? '--captionColor: var(--' ~ configuration.block_style.caption_color_select ~ ')',
    configuration.block_style.caption_color_select == 'customColor' ? '--captionColor: ' ~ configuration.block_style.caption_color_custom,
    configuration.block_style.text_color_select != 'default' and configuration.block_style.text_color_select != 'customColor' ? '--textColor: var(--' ~ configuration.block_style.text_color_select ~ ')',
    configuration.block_style.text_color_select == 'customColor' ? '--textColor: ' ~ configuration.block_style.text_color_custom,
    configuration.block_style.button_color_select != 'default' and configuration.block_style.button_color_select != 'customColor' ? '--buttonColor: var(--' ~ configuration.block_style.button_color_select ~ ')',
    configuration.block_style.button_color_select == 'customColor' ? '--buttonColor: ' ~ configuration.block_style.button_color_custom,
    configuration.block_style.button_link_color_select != 'default' and configuration.block_style.button_link_color_select != 'customColor' ? '--buttonLinkColor: var(--' ~ configuration.block_style.button_link_color_select ~ ')',
    configuration.block_style.button_link_color_select == 'customColor' ? '--buttonLinkColor: ' ~ configuration.block_style.button_link_color_custom,
    configuration.block_style.button_secondary_color_select != 'default' and configuration.block_style.button_secondary_color_select != 'customColor' ? '--buttonSecondaryColor: var(--' ~ configuration.block_style.button_secondary_color_select ~ ')',
    configuration.block_style.button_secondary_color_select == 'customColor' ? '--buttonSecondaryColor: ' ~ configuration.block_style.button_secondary_color_custom,
    configuration.block_style.button_secondary_link_color_select != 'default' and configuration.block_style.button_secondary_link_color_select != 'customColor' ? '--buttonSecondaryLinkColor: var(--' ~ configuration.block_style.button_secondary_link_color_select ~ ')',
    configuration.block_style.button_secondary_link_color_select == 'customColor' ? '--buttonSecondaryLinkColor: ' ~ configuration.block_style.button_secondary_link_color_custom,
    configuration.block_style.text_align != 'default' ? '--textAlign: ' ~ configuration.block_style.text_align : '',
    configuration.block_style.sm_padding_left != 'default' ? '--smPaddingLeft: ' ~ configuration.block_style.sm_padding_left : '',
    configuration.block_style.sm_padding_top != 'default' ? '--smPaddingTop: ' ~ configuration.block_style.sm_padding_top : '',
    configuration.block_style.sm_padding_right != 'default' ? '--smPaddingRight: ' ~ configuration.block_style.sm_padding_right : '',
    configuration.block_style.sm_padding_bottom != 'default' ? '--smPaddingBottom: ' ~ configuration.block_style.sm_padding_bottom : '',
    configuration.block_style.sm_block_align != 'default' ? '--smAlignSelf: ' ~ configuration.block_style.sm_block_align : '',
    configuration.block_style.md_padding_left != 'default' ? '--mdPaddingLeft: ' ~ configuration.block_style.md_padding_left : '',
    configuration.block_style.md_padding_top != 'default' ? '--mdPaddingTop: ' ~ configuration.block_style.md_padding_top : '',
    configuration.block_style.md_padding_right != 'default' ? '--mdPaddingRight: ' ~ configuration.block_style.md_padding_right : '',
    configuration.block_style.md_padding_bottom != 'default' ? '--mdPaddingBottom: ' ~ configuration.block_style.md_padding_bottom : '',
    configuration.block_style.md_block_align != 'default' ? '--mdAlignSelf: ' ~ configuration.block_style.md_block_align : '',
    configuration.block_style.lg_padding_left != 'default' ? '--lgPaddingLeft: ' ~ configuration.block_style.lg_padding_left : '',
    configuration.block_style.lg_padding_top != 'default' ? '--lgPaddingTop: ' ~ configuration.block_style.lg_padding_top : '',
    configuration.block_style.lg_padding_right != 'default' ? '--lgPaddingRight: ' ~ configuration.block_style.lg_padding_right : '',
    configuration.block_style.lg_padding_bottom != 'default' ? '--lgPaddingBottom: ' ~ configuration.block_style.lg_padding_bottom : '',
    configuration.block_style.lg_block_align != 'default' ? '--lgAlignSelf: ' ~ configuration.block_style.lg_block_align : '',
    configuration.block_style.xl_padding_left != 'default' ? '--xlPaddingLeft: ' ~ configuration.block_style.xl_padding_left : '',
    configuration.block_style.xl_padding_top != 'default' ? '--xlPaddingTop: ' ~ configuration.block_style.xl_padding_top : '',
    configuration.block_style.xl_padding_right != 'default' ? '--xlPaddingRight: ' ~ configuration.block_style.xl_padding_right : '',
    configuration.block_style.xl_padding_bottom != 'default' ? '--xlPaddingBottom: ' ~ configuration.block_style.xl_padding_bottom : '',
    configuration.block_style.xl_block_align != 'default' ? '--xlAlignSelf: ' ~ configuration.block_style.xl_block_align : '',
    configuration.block_style.xxl_padding_left != 'default' ? '--xxlPaddingLeft: ' ~ configuration.block_style.xxl_padding_left : '',
    configuration.block_style.xxl_padding_top != 'default' ? '--xxlPaddingTop: ' ~ configuration.block_style.xxl_padding_top : '',
    configuration.block_style.xxl_padding_right != 'default' ? '--xxlPaddingRight: ' ~ configuration.block_style.xxl_padding_right : '',
    configuration.block_style.xxl_padding_bottom != 'default' ? '--xxlPaddingBottom: ' ~ configuration.block_style.xxl_padding_bottom : '',
    configuration.block_style.xxl_block_align != 'default' ? '--xxlAlignSelf: ' ~ configuration.block_style.xxl_block_align : '',
    configuration.block_style.animation_option == TRUE  and configuration.block_style.animation_duration ? '--animationDuration: ' ~ configuration.block_style.animation_duration : '',
    configuration.block_style.animation_option == TRUE  and configuration.block_style.animation_delay ? '--animationDelay: ' ~ configuration.block_style.animation_delay : '',
    configuration.block_style.animation_option == TRUE  and configuration.block_style.animation_count ? '--animationCount: ' ~ configuration.block_style.animation_count : '',    
    configuration.block_style.animation_option == TRUE  and configuration.block_style.animation_duration ? '--animationDuration: ' ~ configuration.block_style.animation_duration : '',
    configuration.block_style.animation_option == TRUE  and configuration.block_style.animation_delay ? '--animationDelay: ' ~ configuration.block_style.animation_delay : '',
    configuration.block_style.animation_option == TRUE  and configuration.block_style.animation_count ? '--animationCount: ' ~ configuration.block_style.animation_count : '',
    configuration.block_style.animation_option == TRUE  and configuration.block_style.animation_function and configuration.block_style.animation_function != 'default' ? '--animationFunction: ' ~ configuration.block_style.animation_function : '',
    configuration.block_style.animation_option == TRUE  and configuration.block_style.animation_fill and configuration.block_style.animation_fill != 'default' ? '--animationFill: ' ~ configuration.block_style.animation_fill : '',
  ]|remove_empty
%}

<section {{ attributes.setAttribute('style', style_vars|join('; ')).setAttribute('id', 'blockCta-' ~ id ).addClass(classes) }}>
  {{title_prefix }}
  <h3{{ title_attributes.addClass(title_classes) }}>{{ label }}</h3>
  {{ title_suffix }}
  {% block content %}
    {{ content.field_bt_img}}
    {{ content.field_bt_content_title }}
    {{ content.field_bt_epigrafe}}
    {{ content.field_bt_paragraph}}
    {% if content.field_bt_link_double is not empty %}
      <div class="blockCta__buttons blockCta--right-offset__buttons">
        {% if content.field_bt_link_double.0 is not empty %}
            <div class="btn btn-lg blockCta__button blockCta--right-offset__button">
              {{ content.field_bt_button_icon }}  
              <div class="btn-link blockCta__link blockCta--right-offset__link">
                {{ content.field_bt_link_double.0 }}
              </div>  
            </div>
        {% endif %}
        {% if content.field_bt_link_double.1 is not empty %}    
            <div class="btn btn-lg blockCta__button-secondary blockCta--right-offset__button-secondary">
              {{ content.field_bt_button_secondary_icon }}  
              <div class="btn-link blockCta__link blockCta--right-offset__link">
                {{ content.field_bt_link_double.1 }}
              </div>
            </div>
        {% endif %}
      </div>
      {% endif %}
  {% endblock %}
</section>